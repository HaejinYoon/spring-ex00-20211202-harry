<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zerock.mapper.project1.BoardMapper">

<select id="getList" resultType="org.zerock.domain.project1.BoardVO">
	SELECT 
    	b.id,
    	b.title,
    	b.content,
    	b.writer,
    	b.inserted,
    	b.updated,
    	b.views,
    	m.nickName
	FROM
    	Board b
    JOIN
    	Member m ON b.writer = m.id
	ORDER BY id DESC
</select>
<select id="read" resultType="org.zerock.domain.project1.BoardVO">
	SELECT 
		b.id,
		b.title,
		b.content,
		b.writer,
		b.inserted,
		b.updated,
		b.views,
		m.nickName
	FROM
		Board b
	JOIN
		Member m
	ON
		b.writer = m.id
	WHERE
		b.id = #{id}
</select>

<insert id="insert" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
	INSERT INTO
		Board (title, content, writer, views) 
	VALUES (#{title}, #{content}, #{writer}, 0)
</insert>

<update id="update">
	UPDATE 
		Board
	SET
		title=#{title},
		content=#{content},
		writer=#{writer},
		updated=NOW()
	WHERE
		id = #{id}
</update>

<delete id="delete" >
	DELETE FROM Board WHERE id = #{id}
</delete>

<update id="updateViews" >
	UPDATE 
		Board
	SET
		views = views+ 1
	WHERE
		id = #{id}
</update>
<!-- <select id="getListPaging" resultType="org.zerock.domain.project1.BoardVO">
	SELECT 
    	b.id,
    	b.title,
    	b.content,
    	b.writer,
    	b.inserted,
    	b.updated,
    	b.views,
    	m.nickName
	FROM
    	Board b
    JOIN
    	Member m ON b.writer = m.id
	ORDER BY id DESC
	LIMIT #{(page -1)*rowPerPage}, #{rowPerPage}
</select> -->

<select id="getTotal">
	SELECT count(*) FROM Board
</select>











</mapper>